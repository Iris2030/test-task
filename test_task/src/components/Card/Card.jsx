import React, { useEffect, useState } from 'react';
import style from './card.module.css';
import fetchCampers from '../../Api/ApiService';

const Card = () => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [campers, setCampers] = useState(null); // State for storing campers data

  useEffect(() => {
    const fetchAllCampers = async () => {
      try {
        setLoading(true);
        const response = await fetchCampers();
        setCampers(response); 
        setLoading(false);
      } catch (error) {
        setError(error);
        setLoading(false);
      }
    };

    fetchAllCampers();  
  }, []);
console.log(campers);
  return (
    <div className={style.card_container}>
    {campers && campers.map(camper => (
      <div key={camper._id} className={style.card}>
        <img className={style.card_img} src={camper.gallery[0]} alt="camper_photo" />
        <div className={style.content_wrapper}>
          <div className={style.name_and_price}>
            <h1 className={style.name}>{camper.name}</h1>
            <h1 className={style.price}>â‚¬{camper.price}</h1>
          </div>

          <div className={style.flex_container}>
            <p className={style.rating}>{camper.rating}({camper.reviews.length} Rewies)</p>
            <p className={style.location}>{camper.location}</p>
          </div>

          <p className={style.description}>{camper.description.split(' ').slice(0, 12).join(' ') + ' ...'}</p> 

          <ul className={style.card_info_wrapper}>
            <li className={style.card_info}>
              <svg id="icon-users" width="20" height="20" viewBox="0 0 20 20" fill="none" >
                <path d="M5.66666 15.0833H2.91666C2.74999 15.0833 2.66666 15 2.58333 14.9167C2.49999 14.8333 2.41666 14.6667 2.49999 14.5C2.99999 13.0833 4.24999 12.25 5.66666 12.25C7.41666 12.25 8.83333 10.75 8.83333 9.00001C8.83333 7.25001 7.41666 5.58334 5.66666 5.58334C3.91666 5.58334 2.49999 7.08334 2.49999 8.91668C2.49999 9.75001 2.83333 10.5833 3.33333 11.1667C2.24999 11.75 1.41666 12.6667 0.91666 13.9167C0.749994 14.5 0.833327 15.25 1.24999 15.8333C1.66666 16.4167 2.24999 16.75 2.91666 16.75H5.66666C6.16666 16.75 6.49999 16.4167 6.49999 15.9167C6.49999 15.4167 6.16666 15.0833 5.66666 15.0833ZM4.16666 8.91668C4.16666 8.00001 4.83333 7.33334 5.66666 7.33334C6.49999 7.33334 7.16666 8.08334 7.16666 8.91668C7.16666 9.83334 6.49999 10.5 5.66666 10.5C4.83333 10.5 4.16666 9.75001 4.16666 8.91668Z" fill="#101828"/>
                <path d="M19.0833 13.4167C18.5 11.8333 17.3333 10.6667 16 10C16.75 9.33335 17.1666 8.33335 17.1666 7.16668C17.1666 5.00002 15.5 3.25002 13.5 3.25002C11.5 3.25002 9.83331 5.00002 9.83331 7.16668C9.83331 8.25002 10.25 9.25002 11 10C9.66664 10.6667 8.49998 11.8333 7.91664 13.4167C7.49998 14.1667 7.66664 15 8.08331 15.6667C8.49998 16.3333 9.24998 16.6667 9.99998 16.6667H16.9166C17.6666 16.6667 18.4166 16.25 18.8333 15.6667C19.3333 15 19.4166 14.1667 19.0833 13.4167ZM11.4166 7.25002C11.4166 6.00002 12.3333 5.00002 13.4166 5.00002C14.5 5.00002 15.4166 6.00002 15.4166 7.25002C15.4166 8.50001 14.5 9.50002 13.4166 9.50002C12.3333 9.50002 11.4166 8.41668 11.4166 7.25002ZM17.4166 14.75C17.3333 14.8333 17.1666 15.0833 16.9166 15.0833H9.99998C9.66664 15.0833 9.49998 14.8333 9.49998 14.75C9.41664 14.6667 9.24998 14.3333 9.41665 14C10.0833 12.25 11.75 11.0833 13.5 11.0833C15.25 11.0833 16.9166 12.25 17.5833 14C17.6666 14.3333 17.5 14.6667 17.4166 14.75Z" fill="#101828"/>
              </svg>   

              <p className={style.card_text}>{camper.adults} adults</p>
            </li>

            <li className={style.card_info}>
            <svg version="1.1"  width="32" height="32" viewBox="0 0 32 32">
              <path fill="none" strokeLinejoin="round" strokeLinecap="round" strokeMiterlimit="4" strokeWidth="2.4" stroke="#000" d="M22.667 14.667h2c0.53 0 1.039-0.211 1.414-0.586s0.586-0.884 0.586-1.414-0.211-1.039-0.586-1.414c-0.375-0.375-0.884-0.586-1.414-0.586h-2v6.667M22.667 22.667v5.333h1.333c0.707 0 1.386-0.281 1.886-0.781s0.781-1.178 0.781-1.886c0-0.707-0.281-1.385-0.781-1.886s-1.178-0.781-1.886-0.781h-1.333zM4 6.667c0 0.707 0.281 1.386 0.781 1.886s1.178 0.781 1.886 0.781c0.707 0 1.386-0.281 1.886-0.781s0.781-1.178 0.781-1.886c0-0.707-0.281-1.386-0.781-1.886s-1.178-0.781-1.886-0.781c-0.707 0-1.386 0.281-1.886 0.781s-0.781 1.178-0.781 1.886z"></path>
              <path fill="none" strokeLinejoin="round" strokeLinecap="round" strokeMiterlimit="4" strokeWidth="2.4" stroke="#000" d="M6.667 9.333v4c0 0.354 0.14 0.693 0.391 0.943s0.589 0.391 0.943 0.391h4M12 14.667v9.333c0 0.354 0.14 0.693 0.391 0.943s0.589 0.39 0.943 0.39h4M12 14.667h5.333"></path>
            </svg>

              <p className={style.card_text}>{camper.transmission}</p>
            </li>

            <li className={style.card_info}>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16.4749 6.025L16.4833 6.01667L13.3833 2.91667L12.4999 3.8L14.2583 5.55833C13.4749 5.85833 12.9166 6.60833 12.9166 7.5C12.9166 7.77359 12.9705 8.0445 13.0752 8.29726C13.1799 8.55002 13.3333 8.77968 13.5268 8.97314C13.9175 9.36384 14.4474 9.58333 14.9999 9.58333C15.2999 9.58333 15.5749 9.51667 15.8333 9.40833V15.4167C15.8333 15.6377 15.7455 15.8496 15.5892 16.0059C15.4329 16.1622 15.2209 16.25 14.9999 16.25C14.7789 16.25 14.5669 16.1622 14.4107 16.0059C14.2544 15.8496 14.1666 15.6377 14.1666 15.4167V11.6667C14.1666 11.2246 13.991 10.8007 13.6784 10.4882C13.3659 10.1756 12.9419 10 12.4999 10H11.6666V4.16667C11.6666 3.72464 11.491 3.30072 11.1784 2.98816C10.8659 2.67559 10.4419 2.5 9.99992 2.5H4.99992C4.55789 2.5 4.13397 2.67559 3.82141 2.98816C3.50885 3.30072 3.33325 3.72464 3.33325 4.16667V17.5H11.6666V11.25H12.9166V15.4167C12.9166 15.9692 13.1361 16.4991 13.5268 16.8898C13.9175 17.2805 14.4474 17.5 14.9999 17.5C15.2735 17.5 15.5444 17.4461 15.7972 17.3414C16.0499 17.2367 16.2796 17.0833 16.4731 16.8898C16.6665 16.6964 16.82 16.4667 16.9247 16.2139C17.0294 15.9612 17.0833 15.6903 17.0833 15.4167V7.5C17.0833 6.925 16.8499 6.4 16.4749 6.025ZM9.99992 11.25V15.8333H4.99992V10H9.99992V11.25ZM9.99992 8.33333H4.99992V4.16667H9.99992V8.33333ZM14.9999 8.33333C14.7789 8.33333 14.5669 8.24554 14.4107 8.08926C14.2544 7.93297 14.1666 7.72101 14.1666 7.5C14.1666 7.27899 14.2544 7.06702 14.4107 6.91074C14.5669 6.75446 14.7789 6.66667 14.9999 6.66667C15.2209 6.66667 15.4329 6.75446 15.5892 6.91074C15.7455 7.06702 15.8333 7.27899 15.8333 7.5C15.8333 7.72101 15.7455 7.93297 15.5892 8.08926C15.4329 8.24554 15.2209 8.33333 14.9999 8.33333Z" fill="#101828"/>
            </svg>


              <p className={style.card_text}>{camper.engine}</p>
            </li>

            <li className={style.card_info}>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
              <title>Horizontal-container</title>
              <path fill="none" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="4" stroke-width="1.7778" stroke="#000" d="M22.914 14.815v-11.852c-4.756 4.537-4.961 8.216-4.938 11.852h4.938zM22.914 14.815v5.926h-0.988v-2.963M12.049 3.951v16.79M9.087 3.951v2.963c0 0.786 0.312 1.539 0.868 2.095s1.309 0.868 2.095 0.868c0.786 0 1.539-0.312 2.095-0.868s0.868-1.309 0.868-2.095v-2.963"></path>
            </svg>


              <p className={style.card_text}>{camper.details.kitchen && 'Kitchen'}</p>
            </li>
          </ul>
        </div>
      </div>
    ))}
</div>
  );
};

export default Card;
